App.controller("ContactCtrl",["$scope","API","LocalStorage","$location",function(n,t,i,r){i.get("User")&&(n.Contact=i.get("User"));n.Submit=function(){console.log(n.Contact.name);t.SendMsg(n.Contact).then(()=>{alert("Thank you\nWe receive your message."),n.Contact=null,r.path("/home"),html_resp("Send Message successfully!","text-success")},()=>html_resp("Failed to send Message!","text-danger"))}}]);App.controller("CPHomeCtrl",["$scope","$filter","API",function(n,t,i){i.Employees.then(t=>n.Employees=t.data,()=>html_resp("Failed Retrieving Employees!","text-danger"));n.addNewEmp=function(){i.AddEmp(n.formData).then(t=>{n.Employees.push(t.data[0]),n.formData="",html_resp("Employee added successfully!","text-success")},()=>html_resp("Failed Adding Employee!","text-danger"))};n.editEmp=function(t,r){if($("#"+r+" a.btn-info").text()=="Edit")$("#"+r+" .inputs").removeAttr("readonly").toggleClass("inputs").toggleClass("temp-inputs"),$("#"+r+" a.btn-info").text("Save");else if($("#"+r+" a.btn-info").text()=="Save"){var u={_id:r[0][0],name:$("#"+r+" input[name=name]").val(),dept:$("#"+r+" input[name=dept]").val(),joinDate:$("#"+r+" input[name=joinDate]").val(),salary:$("#"+r+" input[name=salary]").val(),eval:$("#"+r+" input[name=eval]").val()};i.EditEmp(u).then(i=>{$("#"+r+" .temp-inputs").attr("readonly",!0).toggleClass("inputs").toggleClass("temp-inputs"),$("#"+r+" a.btn-info").text("Edit"),n.Employees[t]=i.config.data,$("#"+r+" a.btn-info").text("Edit"),html_resp("Employee edited successfully!","text-success")},()=>html_resp("Failed Editing Employee!","text-danger"))}};n.delEmp=function(n){i.DelEmp({_id:n[0][0]}).then(()=>html_resp("Employee deleted successfully!","text-success"),()=>html_resp("Failed deleting Employee!","text-danger"))};n.sorting=i=>{i=(n.sign=n.sign=="+"?"-":"+")+i,n.Employees=t("orderBy")(n.Employees,i)}}]);App.controller("LoginCtrl",["$scope","LocalStorage","API",function(n,t,i){n.Login=function(){i.Login(n.User).then(n=>{n.data.correct?(t.set("User",n.data.user),window.location="/admincp",html_resp("Login successfully!","text-success")):html_resp("Failed to login!","text-danger")},()=>html_resp("Failed to login!","text-danger"))};n.Register=function(){n.User.password==n.User.pass2?i.AddUser(n.User).then(()=>{t.set("User",n.User),window.location="/admincp",html_resp("Register successfully!","text-success")},()=>html_resp("Failed to register!","text-danger")):html_resp("Failed to register!","text-danger")}}]);App.controller("ProfileCtrl",["$scope","LocalStorage","API",function(n,t,i){n.User=t.get("User");n.Submit=function(){n.User.password==n.User.pass2?i.EditUser(n.User).then(()=>{t.set("User",n.User),html_resp("Edit User successfully!","text-success")},()=>html_resp("Failed edit User!","text-danger")):html_resp("Failed edit User!","text-danger")}}]);